{"remainingRequest":"/Users/atsukotoda/Desktop/book-api/book-pj/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/atsukotoda/Desktop/book-api/book-pj/src/pages/BookSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/atsukotoda/Desktop/book-api/book-pj/src/pages/BookSearch.vue","mtime":1626405850723},{"path":"/Users/atsukotoda/Desktop/book-api/book-pj/node_modules/cache-loader/dist/cjs.js","mtime":1624522382349},{"path":"/Users/atsukotoda/Desktop/book-api/book-pj/node_modules/babel-loader/lib/index.js","mtime":1624522382353},{"path":"/Users/atsukotoda/Desktop/book-api/book-pj/node_modules/cache-loader/dist/cjs.js","mtime":1624522382349},{"path":"/Users/atsukotoda/Desktop/book-api/book-pj/node_modules/vue-loader/lib/index.js","mtime":1624522393620}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQm9va3NlcmNoIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2V5d29yZDogIiIsCiAgICAgIHNlYXJjaHJlc3VsdHM6IFtdLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgICAgYWRkQm9va0xpc3QoaW5kZXgpewogICAgICAgICAgdGhpcy4kZW1pdCgnYWRkLWJvb2stbGlzdCcsdGhpcy5zZWFyY2hyZXN1bHRzW2luZGV4XSkKICAgICAgfSwKICAgIGFzeW5jIHNlYXJjaChrZXl3b3JkKSB7CiAgICAgIHRoaXMuc2VhcmNocmVzdWx0cyA9IFtdOwogICAgICBjb25zdCBiYXNlVXJsID0gImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2Jvb2tzL3YxL3ZvbHVtZXM/IjsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIHE6IGBpbnRpdGxlOiR7a2V5d29yZH1gLAogICAgICAgIG1heFJlc3VsdHM6IDQwLAogICAgICB9OwogICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKTsKICAgIC8vICAgY29uc29sZS5sb2coYmFzZVVybCArIHF1ZXJ5UGFyYW1zKTsKCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYmFzZVVybCArIHF1ZXJ5UGFyYW1zKS50aGVuKChyZXNwb25zZSkgPT4KICAgICAgICByZXNwb25zZS5qc29uKCkKICAgICAgKTsKICAgIC8vICAgY29uc29sZS5sb2cocmVzcG9uc2UuaXRlbXMpOwoKICAgICAgZm9yIChsZXQgYm9vayBvZiByZXNwb25zZS5pdGVtcykgewogICAgICAgIGxldCB0aXRsZSA9IGJvb2sudm9sdW1lSW5mby50aXRsZTsKICAgICAgICBsZXQgaW1nID0gYm9vay52b2x1bWVJbmZvLmltYWdlTGlua3M7CiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gYm9vay52b2x1bWVJbmZvLmRlc2NyaXB0aW9uOwogICAgICAgIHRoaXMuc2VhcmNocmVzdWx0cy5wdXNoKHsKICAgICAgICAgIHRpdGxlOiB0aXRsZSA/IHRpdGxlIDogIiIsCiAgICAgICAgICBpbWFnZTogaW1nID8gaW1nLnRodW1ibmFpbCA6ICIiLAogICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uID8gZGVzY3JpcHRpb24uc2xpY2UoMCwgNDApIDogIiIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["BookSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookSearch.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <v-row>\n      <v-col cols=\"6\">\n        <v-text-field label=\"本のタイトルを検索\" v-model=\"keyword\">\n        </v-text-field>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols=\"3\">\n        <v-btn color=\"primary\" @click=\"search(keyword)\">検索する</v-btn>\n      </v-col>\n      <v-col cols=\"3\">\n        <v-btn color=\"secondary\" to=\"/\">一覧に戻る</v-btn>\n      </v-col>\n    </v-row>\n    <v-row dense>\n      <v-col cols=\"4\" v-for=\"(book, index) in searchresults\" :key=\"book.index\">\n        <v-card>\n          <v-img\n            :src=\"book.image\"\n            class=\"white--text align-end\"\n            gradient=\"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)\"\n            height=\"200px\"\n          >\n            <v-card-title v-text=\"book.title\">{{ book.title }}</v-card-title>\n            {{ book.description }}\n          </v-img>\n\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn fab dark color=\"indigo\" @click=\"addBookList(index)\">\n              <v-icon dark>mdi-plus</v-icon>\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Bookserch\",\n  data() {\n    return {\n      keyword: \"\",\n      searchresults: [],\n    };\n  },\n  methods: {\n      addBookList(index){\n          this.$emit('add-book-list',this.searchresults[index])\n      },\n    async search(keyword) {\n      this.searchresults = [];\n      const baseUrl = \"https://www.googleapis.com/books/v1/volumes?\";\n      const params = {\n        q: `intitle:${keyword}`,\n        maxResults: 40,\n      };\n      const queryParams = new URLSearchParams(params);\n    //   console.log(baseUrl + queryParams);\n\n      const response = await fetch(baseUrl + queryParams).then((response) =>\n        response.json()\n      );\n    //   console.log(response.items);\n\n      for (let book of response.items) {\n        let title = book.volumeInfo.title;\n        let img = book.volumeInfo.imageLinks;\n        let description = book.volumeInfo.description;\n        this.searchresults.push({\n          title: title ? title : \"\",\n          image: img ? img.thumbnail : \"\",\n          description: description ? description.slice(0, 40) : \"\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style></style>\n"]}]}